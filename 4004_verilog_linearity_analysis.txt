================================================================================
Intel 4004 ALU Verilog çº¿æ€§/éçº¿æ€§è¿ç®—åˆ†ææŠ¥å‘Š
================================================================================

ğŸ“Š è¿ç®—åˆ†å¸ƒç»Ÿè®¡:
  çº¿æ€§è¿ç®—: 52 ä¸ª
  éçº¿æ€§è¿ç®—: 0 ä¸ª
  æ§åˆ¶é€»è¾‘: 4 ä¸ª
  å­˜å‚¨æ›´æ–°: 18 ä¸ª
  æ€»è¯­å¥æ•°: 74 ä¸ª

ğŸ”µ çº¿æ€§è¿ç®—éƒ¨åˆ† (52 ä¸ª):
  â”œâ”€ ç‰¹ç‚¹: åŠ æ³•ã€å‡æ³•ã€ä½è¿ç®—ã€æ¯”è¾ƒè¿ç®—
  â””â”€ ç¡¬ä»¶å®ç°: ç®€å•ç»„åˆé€»è¾‘ï¼Œå»¶è¿Ÿä½

  1. è¡Œ 76: n0854
     è¿ç®—: ~
     è¡¨è¾¾å¼: ~(~x12)
     å¤æ‚åº¦: 1

  2. è¡Œ 77: n0351
     è¿ç®—: |, ~
     è¡¨è¾¾å¼: ~(x21_clk2 | ~dcl)
     å¤æ‚åº¦: 2

  3. è¡Œ 78: n0415
     è¿ç®—: |, ~
     è¡¨è¾¾å¼: ~(x21_clk2 | ope_n)
     å¤æ‚åº¦: 2

  4. è¡Œ 79: add_ib
     è¿ç®—: |, ~
     è¡¨è¾¾å¼: ~(x31_clk2 | ~inc_isz)
     å¤æ‚åº¦: 2

  5. è¡Œ 80: cy_ib
     è¿ç®—: |, ~
     è¡¨è¾¾å¼: ~(x31_clk2 | ~iow)
     å¤æ‚åº¦: 2

  6. è¡Œ 81: acb_ib
     è¿ç®—: |, &, ~
     è¡¨è¾¾å¼: ~((x31_clk2 | ~xch) & (x21_clk2 | ~iow))
     å¤æ‚åº¦: 3

  7. è¡Œ 82: n0477
     è¿ç®—: |, &, ~
     è¡¨è¾¾å¼: ~((~x31_clk2 & ~ior) | (a12 & ior))
     å¤æ‚åº¦: 3

  8. è¡Œ 83: adc_cy
     è¿ç®—: |, ~
     è¡¨è¾¾å¼: ~(write_carry_2 | n0477)
     å¤æ‚åº¦: 2

  9. è¡Œ 84: add_acc
     è¿ç®—: |, ~
     è¡¨è¾¾å¼: ~(write_acc_1 | n0477)
     å¤æ‚åº¦: 2

  10. è¡Œ 85: adsr
     è¿ç®—: |, ~
     è¡¨è¾¾å¼: ~(x31_clk2 | ~rar)
     å¤æ‚åº¦: 2
     ... è¿˜æœ‰ 42 ä¸ªçº¿æ€§è¿ç®—

ğŸŸ¡ æ§åˆ¶é€»è¾‘éƒ¨åˆ† (4 ä¸ª):
  â”œâ”€ ç‰¹ç‚¹: æ¡ä»¶é€‰æ‹©ã€åˆ†æ”¯åˆ¤æ–­
  â””â”€ ç¡¬ä»¶å®ç°: å¤šè·¯é€‰æ‹©å™¨ã€æ¡ä»¶é€»è¾‘

  1. è¡Œ 138: n0911
     æ§åˆ¶ç±»å‹: |, &, ~, ?:
     è¡¨è¾¾å¼: ~(n0550 ? (n0887 | n0870) : (n0887 & n0870))

  2. è¡Œ 140: n0912
     æ§åˆ¶ç±»å‹: |, &, ~, ?:
     è¡¨è¾¾å¼: ~(n0553 ? (n0889 | n0871) : (n0889 & n0871))

  3. è¡Œ 142: n0913
     æ§åˆ¶ç±»å‹: |, &, ~, ?:
     è¡¨è¾¾å¼: ~(n0556 ? (n0891 | n0872) : (n0891 & n0872))

  4. è¡Œ 144: n0914
     æ§åˆ¶ç±»å‹: |, &, ~, ?:
     è¡¨è¾¾å¼: ~(n0559 ? (n0893 | n0873) : (n0893 & n0873))

ğŸŸ¢ å­˜å‚¨æ›´æ–°éƒ¨åˆ† (18 ä¸ª):
  â”œâ”€ ç‰¹ç‚¹: å¯„å­˜å™¨èµ‹å€¼ã€çŠ¶æ€æ›´æ–°
  â””â”€ ç¡¬ä»¶å®ç°: è§¦å‘å™¨ã€é”å­˜å™¨

  1. n0889 (å¤æ‚åº¦: 1)
     è¡¨è¾¾å¼: ~tmp[1]

  2. n0893 (å¤æ‚åº¦: 1)
     è¡¨è¾¾å¼: ~tmp[3]

  3. n0550 (å¤æ‚åº¦: 1)
     è¡¨è¾¾å¼: ~cy

  4. tmp (å¤æ‚åº¦: 0)
     è¡¨è¾¾å¼: data

  5. tmp (å¤æ‚åº¦: 0)
     è¡¨è¾¾å¼: 4'b1111

  6. n0887 (å¤æ‚åº¦: 0)
     è¡¨è¾¾å¼: tmp[0]

  7. n0891 (å¤æ‚åº¦: 0)
     è¡¨è¾¾å¼: tmp[2]

  8. n0550 (å¤æ‚åº¦: 0)
     è¡¨è¾¾å¼: 1'b0

ğŸ’¡ è®¾è®¡ä¼˜åŒ–å»ºè®®:
  ğŸ“Š çº¿æ€§åŒ–ç¨‹åº¦: 70.3% (çº¿æ€§è¿ç®—å æ¯”)
     âœ… è®¾è®¡çº¿æ€§åº¦è‰¯å¥½ï¼Œç¡¬ä»¶å®ç°ç›¸å¯¹ç®€å•

================================================================================
æå–çš„ä»£ç æ®µ
================================================================================

## Linear Code:
// çº¿æ€§è¿ç®—: ~
wire n0854		= ~(~x12);
// çº¿æ€§è¿ç®—: |, ~
wire n0351		= ~(x21_clk2 | ~dcl);
// çº¿æ€§è¿ç®—: |, ~
wire n0415		= ~(x21_clk2 | ope_n);
// çº¿æ€§è¿ç®—: |, ~
wire add_ib		= ~(x31_clk2 | ~inc_isz);
// çº¿æ€§è¿ç®—: |, ~
wire cy_ib		= ~(x31_clk2 | ~iow);
// çº¿æ€§è¿ç®—: |, &, ~
wire acb_ib		= ~((x31_clk2 | ~xch) & (x21_clk2 | ~iow));
// çº¿æ€§è¿ç®—: |, &, ~
wire n0477		= ~((~x31_clk2 & ~ior) | (a12 & ior));
// çº¿æ€§è¿ç®—: |, ~
wire adc_cy		= ~(write_carry_2 | n0477);
// çº¿æ€§è¿ç®—: |, ~
wire add_acc	= ~(write_acc_1 | n0477);
// çº¿æ€§è¿ç®—: |, ~
wire adsr		= ~(x31_clk2 | ~rar);
// çº¿æ€§è¿ç®—: |, ~
wire adsl		= ~(x31_clk2 | ~ral);
// çº¿æ€§è¿ç®—: |, ~
wire acc_adac	= ~(~cma | n0342);
// çº¿æ€§è¿ç®—: |, ~
wire acc_ada	= ~(read_acc_3 | n0342);
// çº¿æ€§è¿ç®—: |, ~
wire cy_ada		= ~(add_group_4 | n0342);
// çº¿æ€§è¿ç®—: |, ~
wire cy_adac	= ~(sub_group_6 | n0342);
// çº¿æ€§è¿ç®—: |, ~
wire n0546 = ~(inc_group_5 | n0342);
// çº¿æ€§è¿ç®—: assignment
wire n0553 = n0911;
// çº¿æ€§è¿ç®—: assignment
wire n0556 = n0912;
// çº¿æ€§è¿ç®—: assignment
wire n0559 = n0913;
// çº¿æ€§è¿ç®—: assignment
wire n0861 = n0914;
// çº¿æ€§è¿ç®—: |, &, ~
wire n0877 = ~((n0893 & n0559 & n0873) | (n0861 & (n0893 | n0873 | n0559)));
// çº¿æ€§è¿ç®—: |, &, ~
wire n0878 = ~((n0877 & n0550 & n0870) | (n0553 & (n0887 | n0870 | n0550)));
// çº¿æ€§è¿ç®—: |, &, ~
wire n0875 = ~((n0889 & n0553 & n0871) | (n0556 & (n0889 | n0871 | n0553)));
// çº¿æ€§è¿ç®—: |, &, ~
wire n0879 = ~((n0891 & n0556 & n0872) | (n0559 & (n0891 | n0872 | n0556)));
// çº¿æ€§è¿ç®—: ~
wire n0846 = ~n0878;
// çº¿æ€§è¿ç®—: assignment
wire n0847 =  n0875;
// çº¿æ€§è¿ç®—: ~
wire n0848 = ~n0879;
// çº¿æ€§è¿ç®—: assignment
wire n0514 =  n0877;
// çº¿æ€§è¿ç®—: |, &, ~
wire n0803 = ~((acc_out[3] & (acc_out[2] | acc_out[1])) | cy_1);
// çº¿æ€§è¿ç®—: |, ~
wire n0403 = ~(~daa | n0803);
// çº¿æ€§è¿ç®—: assignment
wire [3:0] acc_in = {n0514, n0848, n0847, n0846};
// çº¿æ€§è¿ç®—: |, ~
assign acc_0 = ~|acc_out;
// çº¿æ€§è¿ç®—: |, ~
assign add_0 = ~|acc_in;
// çº¿æ€§è¿ç®—: |, &, ~
wire n0378 = ~((daa & n0803) | o_ib);
// çº¿æ€§è¿ç®—: &, ==
wire n0345 =  kbp & (acc_out == 4'b1000);
// çº¿æ€§è¿ç®—: &, ==
wire n0354 =  kbp & (acc_out == 4'b0100);
// çº¿æ€§è¿ç®—: &, ==
wire n0363 =  kbp & (acc_out == 4'b0010);
// çº¿æ€§è¿ç®—: &, ==
wire n0370 =  kbp & (acc_out == 4'b0001);
// çº¿æ€§è¿ç®—: |, &, ==, ~
wire n0377 = (kbp & (acc_out == 4'b0000)) | ~n0378;
// çº¿æ€§è¿ç®—: |, ~
wire n0358 = ~(n0345 | n0354 | n0363 | n0370 | n0377 |       n0403);
// çº¿æ€§è¿ç®—: |, ~
wire n0366 = ~(        n0354 | n0363 | n0370 | n0377 | tcs        );
// çº¿æ€§è¿ç®—: |, ~
wire n0359 = ~(n0345 |                 n0370 | n0377 | tcs        );
// çº¿æ€§è¿ç®—: |, ~
wire n0357 = ~(n0345 |         n0363 |         n0377 |       n0403);
// çº¿æ€§è¿ç®—: assignment
assign data = dout;
// çº¿æ€§è¿ç®—: ~
wire n0355 = ~acc_out[2];
// çº¿æ€§è¿ç®—: ~
wire n0364 = ~acc_out[1];
// çº¿æ€§è¿ç®—: ~
wire n0371 = ~acc_out[0];
// çº¿æ€§è¿ç®—: |, ~
assign cmram3 = ~(com_n | n0749);
// çº¿æ€§è¿ç®—: |, ~
assign cmram2 = ~(com_n | n0750);
// çº¿æ€§è¿ç®—: |, ~
assign cmram1 = ~(com_n | n0751);
// çº¿æ€§è¿ç®—: |, ~
assign cmram0 = ~(com_n | ~n0749 | ~n0750 | ~n0751);
// çº¿æ€§è¿ç®—: |, ~
assign cmrom  = ~(com_n | poc);


## Control Code:
// æ§åˆ¶é€»è¾‘: |, &, ~, ?:
wire n0911 = ~(n0550 ? (n0887 | n0870) : (n0887 & n0870));
// æ§åˆ¶é€»è¾‘: |, &, ~, ?:
wire n0912 = ~(n0553 ? (n0889 | n0871) : (n0889 & n0871));
// æ§åˆ¶é€»è¾‘: |, &, ~, ?:
wire n0913 = ~(n0556 ? (n0891 | n0872) : (n0891 & n0872));
// æ§åˆ¶é€»è¾‘: |, &, ~, ?:
wire n0914 = ~(n0559 ? (n0893 | n0873) : (n0893 & n0873));


## Storage Code:
// å­˜å‚¨æ›´æ–°: tmp
tmp <= data;
// å­˜å‚¨æ›´æ–°: tmp
tmp <= 4'b1111;
// å­˜å‚¨æ›´æ–°: n0887
n0887 <= tmp[0];
// å­˜å‚¨æ›´æ–°: n0889
n0889 <= ~tmp[1];
// å­˜å‚¨æ›´æ–°: n0891
n0891 <= tmp[2];
// å­˜å‚¨æ›´æ–°: n0893
n0893 <= ~tmp[3];
// å­˜å‚¨æ›´æ–°: n0550
n0550 <= 1'b0;
// å­˜å‚¨æ›´æ–°: n0550
n0550 <= 1'b1;
// å­˜å‚¨æ›´æ–°: n0550
n0550 <= ~cy;
// å­˜å‚¨æ›´æ–°: n0550
n0550 <= cy;
// å­˜å‚¨æ›´æ–°: acc
acc <= acc_in;
// å­˜å‚¨æ›´æ–°: cy
cy <= n0861;
// å­˜å‚¨æ›´æ–°: cy
cy <= 1'b1;
// å­˜å‚¨æ›´æ–°: cy_1
cy_1 <= cy;
// å­˜å‚¨æ›´æ–°: acc_out
acc_out <= acc;
// å­˜å‚¨æ›´æ–°: n0749
n0749 <= 1'b1;
// å­˜å‚¨æ›´æ–°: n0750
n0750 <= 1'b1;
// å­˜å‚¨æ›´æ–°: n0751
n0751 <= 1'b1;
